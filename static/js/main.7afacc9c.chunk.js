(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{30:function(t,e,n){},31:function(t,e,n){},32:function(t,e,n){"use strict";n.r(e);var o=n(1),a=n(0),r=n.n(a),s=n(3),c=n.n(s),i=n(4),p=(n(30),n(5)),u=(n(31),n(12)),l=n(13),m=n(16),d=n(15),f=n(9),v="SET_STATIONS",b={stations:[]},h=function(t){return{type:v,stations:t}},j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case v:return Object(f.a)(Object(f.a)({},t),{},{stations:e.stations});default:return t}},g=n(14),y=n.p+"static/media/bus-stop-pointer.00286be9.svg",O=function(t){var e=t.mapType,n=t.mapTypeControl,r=void 0!==n&&n,s=t.stations,c=void 0===s?null:s,i=Object(a.useRef)(null),u=Object(a.useState)(),l=Object(p.a)(u,2),m=l[0],d=l[1],f=function(){i.current&&d(new google.maps.Map(i.current,{center:{lat:53.9026082632717,lng:27.561423680539768},zoom:18,mapTypeControl:r,streetViewControl:!1,zoomControl:!0,mapTypeId:e,draggableCursor:"pointer"}))};if(Object(a.useEffect)((function(){m||f()})),m&&c){var v=c.map((function(t,e){return new google.maps.Marker({position:{lat:t.lat,lng:t.lng},map:m,icon:y})})),b=c.map((function(t,e){var n='<div id="content"><div id="bodyContent">'+"<p><b>\u041e\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430:</b> ".concat(t.name,"</p>")+"</div></div>";return new google.maps.InfoWindow({content:n})}));new g.a(m,v,{imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",minimumClusterSize:3}),v.forEach((function(t,e){return t.addListener("click",(function(){return b[e].open(m,t)}))}))}return Object(o.jsx)("div",{className:"wrapper",children:Object(o.jsx)("div",{ref:i,className:"map",id:"map"})})},w=function(t){Object(m.a)(n,t);var e=Object(d.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.setStations,e="http://www.minsktrans.by/city/minsk/stops.txt";fetch("https://powerful-depths-31495.herokuapp.com/"+e,{method:"GET"}).then((function(t){return t.text()})).then((function(e){var n=function(t){var e=t.split("\n").map((function(t){return t.split(";")}));e.shift();for(var n=0;n<e.length;n++)e[n][6]=+e[n][6]/1e5+"",e[n][7]=+e[n][7]/1e5+"";for(var o=0;o<e.length;o++)e[o]=[e[o][0],e[o][4],e[o][6],e[o][7]];for(var a=0;a<e.length;a++)0!==+e[a][2]&&0!==+e[a][3]||(e.splice(a,1),a--);for(var r=0;r<e.length;r++)"?"===e[r][1]||""===e[r][1]?e[r][1]="\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u043d\u0435\u0442 \u0432 \u0431\u0430\u0437\u0435 \u041c\u0438\u043d\u0441\u043a\u0442\u0440\u0430\u043d\u0441":e[r][1];return e.map((function(t){return{id:+t[0],name:t[1],lng:+t[2],lat:+t[3]}}))}(e);t(n)})).catch((function(){return console.log("Can\u2019t access "+e+" response.")}))}},{key:"render",value:function(){var t=this.props,e=t.stations,n=t.mapType,a=t.mapTypeControl;return Object(o.jsx)(O,{mapType:n,mapTypeControl:a,stations:e})}}]),n}(r.a.Component),T=Object(i.b)((function(t,e){return{stations:t.map.stations,mapType:e.mapType,mapTypeControl:e.mapTypeControl}}),{setStations:h})(w);var C=function(){var t=Object(a.useState)(!1),e=Object(p.a)(t,2),n=e[0],r=e[1];return Object(a.useEffect)((function(){(function(){for(var t="https://maps.googleapis.com/maps/api/js?key=AIzaSyC1RxBwFCI5may63paqpyDNJYzvC_svJqU&region=BY&language=ru&v=weekly",e=document.getElementsByTagName("script"),n=0;n<e.length;n++)if(0===e[n].src.indexOf(t))return e[n];var o=document.createElement("script");return o.src=t,o.async=!0,o.defer=!0,window.document.body.appendChild(o),o})().addEventListener("load",(function(){r(!0)}))}),[]),Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)("h1",{children:"\u0412\u0441\u0435 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0433.\xa0\u041c\u0438\u043d\u0441\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0435"}),n&&Object(o.jsx)(T,{mapType:google.maps.MapTypeId.ROADMAP,mapTypeControl:!0})]})},x=n(2),k=Object(x.b)({map:j}),S=Object(x.c)(k);window.store=S;var E=S;c.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(i.a,{store:E,children:Object(o.jsx)(C,{})})}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.7afacc9c.chunk.js.map